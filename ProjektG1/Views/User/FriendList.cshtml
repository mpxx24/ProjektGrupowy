@using ProjektG1.Models
@{
    ViewBag.Title = "FriendList";
    Layout = "~/Views/Shared/LayoutPage.cshtml";
    
    var context = new TaskContext();
    var user = context.Users.Single(x => x.Username == User.Identity.Name);
}

<section class="section">
    <div class="container">
            <div class="col-lg-12 col-md-12 flex-wrapper">
                <div class="col-lg-4">
                    <h3>Add new friend</h3>
                    @using (Html.BeginForm("AddFriend", "User"))
                    {
                        <div class="form-group">
                            <div class="col-lg-8">
                                <input type="text" name="MailAdress" placeholder="mail address" class="my-input form-control" />
                            </div>   
                        </div>
                        <div class="form-group">
                            <div class="col-lg-4">
                                <input type="submit" value="Add" class="btn btn-primary" />
                            </div>
                        </div>
                        
                    }
                </div>

                <div class="col-lg-8">
                    <h3>Your friends list</h3>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <td class="col-lg-1">#</td>
                                <td class="col-lg-2">nick</td>
                                <td class="col-lg-2">email</td>
                                <td class="col-lg-1"></td>
                            </tr>
                        </thead>
                        @foreach (var usr in user.Friends)
                        {
                            <tr>
                                <td>@usr.UserId</td>
                                <td>@usr.Username</td>
                                <td>@usr.MailAdress</td>
                                <td>
                                    @using (Html.BeginForm("DeleteFriend", "User", new { @email = usr.MailAdress }))
                                    {
                                        <button type="submit" name="ButtonUsun" value="Usun" title="usun"
                                                class="icon-button icon-delete btn-task usun">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    }
                                </td>
                            </tr>
                        }
                    </table>
                </div>

                <a href="@Url.Action("Zadanie", "Task")" ><i class="fa fa-arrow-left"></i>&nbsp;Back to tasks board</a>
        </div>
    </div>
</section>


